
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="API">
    <title>API - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <p class="navbar-text">
                                            NFC VAS
                                            1.0
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/nfc-vas/1-0/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/1-0/guide/developer">
                                    Developer Guide
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/1-0/guide/operation">
                                    Operation
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/1-0/guide/api">
                                    API
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/1-0/guide/demo">
                                    Demo
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/1-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>API</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="api" class="anchor"><a class="heading-anchor" href="#api"><span></span></a>API</h1>
                                    <p>
                                            NFC VAS
                                            1.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>The Zebra NFC VAS API is an Android library built on top of the existing Android NFC APIs. The NFC VAS API provides simplified configuration and control of the processes required for accessing a VAS pass stored in a mobile device. This guide discusses the APIs available for NFC VAS.</p>

<hr>

<h2 id="apisummary" class="anchor"><a class="heading-anchor" href="#apisummary"><span></span></a>API Summary</h2>

<p><strong>VasConfig -</strong> base class object used to provide an interface for storing and accessing merchant parameters required to access a VAS pass</p>

<ul>
<li>VasConfig() - constructor</li>

<li>getType() - return the specific type of the VAS object</li>

<li>setPrivateKey() - set the private key</li>

<li>getPrivateKey() - return the current private key in the config object</li>
</ul>

<p><strong>AppleVASConfig -</strong> a VASConfig object that contains the Apple VAS specific parameters for accessing and processing an Apple VAS pass</p>

<ul>
<li>appleVasConfig constructor - create a new VAS Config object, with initialization, that contains details specific to Apple VAS interactions</li>

<li>setPassTypeIds() - Mandatory - specify an array of PassTypeIds needed to read an Apple VAS pass</li>

<li>setFilter() - Optional - configure the filter used to read an Apple VAS pass</li>

<li>setFilterNone() - clear the filter parameter so it won’t be used</li>

<li>setMerchantUrl() - specify the merchant URL needed to read an Apple VAS pass</li>

<li>getPassTypeIds() - return the array of pass type IDs</li>

<li>getMerchantIds() - get the calculated Merchant ID</li>

<li>getFilter() - return the current filter configuration</li>

<li>getMerchantUrl() - get the current merchant URL</li>

<li>getTerminalMode() - get the current terminal operating mode </li>

<li>getProtocol() - get the current VAS Protocol</li>
</ul>

<p><strong>ZebraNfcVas -</strong> class that receives tag notifications, determines if it’s a valid pass and if so, processes the pass, providing either a decrypted pass if the correct PrivateKey was set or an encrypted pass (if no PrivateKey, or the wrong PrivateKey was set).</p>

<ul>
<li>ZebraNfcVas constructor - provide the current activity and the object that implements the response interface</li>

<li>connectToReader() - attach to the NFC system and register the caller to receive the notifications</li>

<li>getVersionString - get the version of the API as a string (Major Minor Build Revision)</li>

<li>getVersion() - get the version of the API as a byte array</li>

<li>getName() - get the name of the API</li>

<li>setVasConfig() - add one VasConfig object to the internal list of config objects that should be used</li>

<li>setVasConfgs() - add an array of VasConfig objects to the internal list</li>

<li>clearConfigs() - clear the internal list of configurations</li>

<li>enableReadPassMode() - configure the polling to only read for the types of cards in which passes are stored</li>

<li>disabelReadPassMode() - return the polling to it’s original configuration</li>

<li>Interface: onPassDetected() - interface function that will provide the final pass contents as well as the merchantId that matched the pass that was read.</li>
</ul>

<hr>

<h2 id="vasconfig" class="anchor"><a class="heading-anchor" href="#vasconfig"><span></span></a>VasConfig</h2>

<p>VasConfig for a configuration object. It will contain the specific configuration information for accessing and interpreting a VAS pass. This is a base class (interface) and shall not be instantiated by itself.</p>

<p>VasConfig() - constructor</p>

<h3 id="gettype" class="anchor"><a class="heading-anchor" href="#gettype"><span></span></a>getType()</h3>

<pre class="prettify prettyprint">    <code>
public VasType getType()
    </code>
</pre>

<p>Returns the type of the VASConfig object</p>

<p><strong>Return values:</strong>
VasType will always return VasType.APPLE_VAS</p>

<h3 id="setprivatekey" class="anchor"><a class="heading-anchor" href="#setprivatekey"><span></span></a>setPrivateKey()</h3>

<pre class="prettify prettyprint">    <code>
public void setPrivateKey(String key)
    </code>
</pre>

<p>Sets the private key in PEM format.</p>

<p><strong>Parameters:</strong>
<code>String key</code></p>

<p>PEM formatted EC Private key. This must not be null and the string must not be empty. It must also be correctly formatted or decryption to succeed. Example:</p>

<pre class="prettyprint"><code> -----BEGIN EC PARAMETERS-----\n
 alkidnklde==\n
 -----END EC PARAMETERS-----\n
 -----BEGIN EC PRIVATE KEY——\n
 aslkdflaksdfjfkk328klxld...\n
 ak7ujvbn9b8o3bv9hae98fn2...\n
 9asjh90fuh34n2uh33==\n
 -----END EC PRIVATE KEY-----\n
</code></pre>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if there the parameter is null or the empty string.</p>

<h3 id="getprivatekey" class="anchor"><a class="heading-anchor" href="#getprivatekey"><span></span></a>getPrivateKey()</h3>

<pre class="prettify prettyprint"><code>public String getPrivateKey()</code>
</pre>

<p>Get the currently configured private key</p>

<p><strong>Return values:</strong>
String - PEM formatted private key value that was provided to the VasConfig</p>

<hr>

<h2 id="applevasconfig" class="anchor"><a class="heading-anchor" href="#applevasconfig"><span></span></a>AppleVASConfig</h2>

<p>This is the configuration class object for Apple VAS passes. This is setting information used to select passes that will be read. The passes that will be read must match the configuration provided by the AppleVASConfig object. AppleVasConfig Implements VasConfig.</p>

<h3 id="applevasconfig-1" class="anchor"><a class="heading-anchor" href="#applevasconfig-1"><span></span></a>AppleVasConfig()</h3>

<pre class="prettify prettyprint"><code>public void AppleVasConfig()</code>
</pre>

<p>Constructor that creates an empty AppleVasConfig object with initialization, that contains details specific to Apple VAS interactions</p>

<h3 id="setpasstypeids" class="anchor"><a class="heading-anchor" href="#setpasstypeids"><span></span></a>setPassTypeIds()</h3>

<pre class="prettify prettyprint"><code>public void setPassTypeIds(String[] passTypeIds)</code>
</pre>

<p>Sets the Pass Type IDs that should match the VAS pass to read. This is a list of zero or more Pass Type IDs as strings. This will OVERWRITE any existing values.</p>

<p><strong>Parameters:</strong>
<code>String[] passTypeIds</code></p>

<p>This is an array of one or more Pass Type IDs. A Pass Type ID is generally of the form: {“pass.com.zebra”} or {“pass.com.zebra”, “pass.com.xyz.somethingspecific”}</p>

<p>When attempting to read a pass, each Pass Type ID in the array will be used to attempt to read the pass. This means that a pass that matches any of the specified Pass Type IDs will be returned.</p>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if there are null or empty strings in the array, if there are invalid characters in any of the pass Type Ids, or if the array is empty.</p>

<h3 id="setfilter" class="anchor"><a class="heading-anchor" href="#setfilter"><span></span></a>setFilter()</h3>

<pre class="prettify prettyprint"><code>public void setFilter(byte[] filter, FilterType type)</code>
</pre>

<p>Set the filter information for the VAS pass to read. This will OVERWRITE any existing value</p>

<p><strong>Parameters:</strong></p>

<p><code>byte[] filter</code></p>

<p>This is a 4-byte array that is the filter value that will be used during the pass retrieval process. It will be used according to the filter type specified in parameter one.</p>

<p><code>FilterType type</code></p>

<p>This is one of two constants: <code>FILTER_TYPE_EXACT_MATCH</code> or <code>FILTER_TYPE_BIT_MASK</code></p>

<p>Exact Match will exactly match the filter value to the value specified in the pass.</p>

<p>Bit Mask will match the specified filter value bit-wise ANDed with the merchant pass filter value. If the result is equal to the merchant pass filter value, then the match is a success.
Zebra NFC VAS SDK User’s Guide v1.0.0.1 10</p>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if the filter value is not exactly 4 bytes in size</p>

<h3 id="setfilternone" class="anchor"><a class="heading-anchor" href="#setfilternone"><span></span></a>setFilterNone()</h3>

<pre class="prettify prettyprint"><code>public void setFilterNone()</code>
</pre>

<p>Clear the Filter. This means that any filter value in a pass (including no filter value) will be accepted.</p>

<h3 id="setmerchanturl" class="anchor"><a class="heading-anchor" href="#setmerchanturl"><span></span></a>setMerchantUrl()</h3>

<pre class="prettify prettyprint"><code>public void setMerchantURL(String url)</code>
</pre>

<p>Set the merchant’s URL information for the VAS pass to read. This will OVERWRITE any existing value</p>

<p><strong>Parameters:</strong>
<code>String url</code></p>

<p>This is the merchant URL string for the associated pass. This is the URL generally used to sign up for a pass. It MUST use the https:// format and must include the https://</p>

<p>Maximum length is 64 bytes</p>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if too long or does not contain a valid https:// header</p>

<h3 id="setpasstypeids-1" class="anchor"><a class="heading-anchor" href="#setpasstypeids-1"><span></span></a>setPassTypeIds()</h3>

<pre class="prettify prettyprint"><code>public String[] getPassTypeIds()</code>
</pre>

<p>Get the list of currently configured Pass Type IDs. This contains a list of zero or more Pass Type IDs as Strings</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
<code>String[]</code> of Pass Type Ids.
<code>null</code> if no passTypeIds have been set.</p>

<h3 id="getmerchantids" class="anchor"><a class="heading-anchor" href="#getmerchantids"><span></span></a>getMerchantIds()</h3>

<pre class="prettify prettyprint"><code>public byte[][] getMerchantIds()</code>
</pre>

<p>Get the list of currently configured Merchant IDs. This contains a list of zero or more Merchant IDs as byte arrays. The merchant ID is the SHA256 of the Pass Type ID.</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
<code>byte[][]</code> of Merchant Ids.
<code>null</code> if no passTypeIds have been set.</p>

<h3 id="getfilter" class="anchor"><a class="heading-anchor" href="#getfilter"><span></span></a>getFilter()</h3>

<pre class="prettify prettyprint"><code>public byte[] getFilter()</code>
</pre>

<p>Get the currently configured filter</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
<code>byte[]</code> of the filter. This will always be exactly 5 bytes, or <code>null</code> if no filter has been set
The <code>filter[5]</code> will contain the filter type (0x01 is exact match, 0x02 is bit_mask).</p>

<h3 id="getmerchanturl" class="anchor"><a class="heading-anchor" href="#getmerchanturl"><span></span></a>getMerchantURL()</h3>

<pre class="prettify prettyprint"><code>public String getMerchantURL()</code>
</pre>

<p>Get the Merchant URL string</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
<code>String</code> of Merchant URL
<code>null</code> if no Merchant URL has been set</p>

<h3 id="getterminalmode" class="anchor"><a class="heading-anchor" href="#getterminalmode"><span></span></a>getTerminalMode()</h3>

<pre class="prettify prettyprint"><code>public String getMerchantURL()</code>
</pre>

<p>Return the private key currently configured. It will be in PEM format</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
Will always return <code>TerminalMode.VasOnly</code></p>

<h3 id="getprotocol" class="anchor"><a class="heading-anchor" href="#getprotocol"><span></span></a>getProtocol()</h3>

<pre class="prettify prettyprint"><code>public AppleVasConfig.VasProtocol getProtocol()</code>
</pre>

<p>Return the private key currently configured. It will be in PEM format</p>

<p><strong>Parameters:</strong>
None</p>

<p><strong>Return values:</strong>
will always return <code>VasProtocol.FullVASProtocol</code></p>

<hr>

<h2 id="zebranfcvas" class="anchor"><a class="heading-anchor" href="#zebranfcvas"><span></span></a>ZebraNfcVas</h2>

<p>This is the top interface for the Zebra NFC VAS SDK. It manages the tag process and interaction. ZebraNfcVas implements NfcAdapter.ReaderCallback</p>

<h3 id="zebranfcvas-1" class="anchor"><a class="heading-anchor" href="#zebranfcvas-1"><span></span></a>ZebraNfcVas()</h3>

<pre class="prettify prettyprint"><code>public void ZebraNfcVas(Activity activity, Response resp)</code>
</pre>

<p>constructor, connects the library to the desired activity. Must also provide the Response interface implementation which will receive the Pass read.</p>

<p><strong>Parameters:</strong>
<code>Activity activity</code> - this is the activity that has registered for the NFC intent
Response resp - this is the class that has implemented the Response interface and will receive the pass data</p>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if either parameter is NULL</p>

<pre class="prettify prettyprint"><code>public void ZebraNfcVas(Activity activity, Response resp, VasConfig cfg)</code>
</pre>

<p>constructor, connects the library to the desired activity. Must also provide the Response interface implementation which will receive the Pass read. This constructor allows for creating the object and specifying the desired configuration objects at the same time</p>

<p><strong>Parameters:</strong>
<code>Activity activity</code> - this is the activity that has registered for the NFC intent
<code>Response resp</code> - this is the class that has implemented the Response interface and will receive the pass data <code>VasConfig cfg</code> - the configuration object that will be used for retrieving and reading a pass</p>

<p><strong>Return values:</strong>
None</p>

<p><strong>Throws:</strong>
<code>InvalidParameterException</code> if either parameter is NULL</p>

<h3 id="connecttoreader" class="anchor"><a class="heading-anchor" href="#connecttoreader"><span></span></a>connectToReader()</h3>

<pre class="prettify prettyprint"><code>public int connectToReader()</code>
</pre>

<p>Attach the ZebraNfcVas object to the NfcAdapter.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> int - result value:</p>

<ul>
<li>0 - success</li>

<li>-1 - the current hardware does not have NFC support </li>

<li>-2 - the NFC hardware is currently disabled</li>
</ul>

<h3 id="getversionstring" class="anchor"><a class="heading-anchor" href="#getversionstring"><span></span></a>getVersionString()</h3>

<pre class="prettify prettyprint"><code>public String getVersionString()</code>
</pre>

<p>Return the version of the ZebraNFCVAS SDK formatted as MAJ.MIN.BLD.REV</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li><code>String</code> - the SDK version in MAJOR.MINOR.BUILD.REVISION format 


<ul>
<li>Major - change in the API that is no longer compatible with previous version</li>

<li>Minor - improvements in performance or additional APIs that are still compatible with previous versions </li>

<li>Build - Build number</li>

<li>Revision - Revision of the current version and build</li></ul>
</li>
</ul>

<h3 id="getversion" class="anchor"><a class="heading-anchor" href="#getversion"><span></span></a>getVersion()</h3>

<pre class="prettify prettyprint"><code>public byte[] getVersion()</code>
</pre>

<p>Return the version of the ZebraNFCVAS SDK in a 4-byte byte[]</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li><code>byte[]</code> - the SDK version in MAJOR.MINOR.BUILD.REVISION format: 


<ul>
<li>Major - change in the API that is no longer  compatible with previous version</li>

<li>Minor - improvements in performance or additional APIs that are still compatible with previous versions </li>

<li>Build - Build number</li>

<li>Revision - Revision of the current version and build</li></ul>
</li>
</ul>

<h3 id="getname" class="anchor"><a class="heading-anchor" href="#getname"><span></span></a>getName()</h3>

<pre class="prettify prettyprint"><code>public String getName()</code>
</pre>

<p>Return the version of the name of the ZebraNFCVAS SDK</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong>  <code>String</code> - the name of the SDK</p>

<h3 id="setvasconfig" class="anchor"><a class="heading-anchor" href="#setvasconfig"><span></span></a>setVasConfig()</h3>

<pre class="prettify prettyprint"><code>public void setVasConfig(VasConfig cfg)</code>
</pre>

<p>Specify the VasConfig object that should be used for interacting with passes. This will add to the array of current config object(s)</p>

<p><strong>Parameters:</strong> <code>VasConfig</code> - a VasConfig object </p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if cfg is <code>null</code>.</p>

<h3 id="setvasconfig-1" class="anchor"><a class="heading-anchor" href="#setvasconfig-1"><span></span></a>setVasConfig()</h3>

<pre class="prettify prettyprint"><code>public void setVasConfig(VasConfig[] cfgs)</code>
</pre>

<p>Specify the VasConfig object or objects that should be used for interacting with passes. This can have one or more VasConfig objects. This will add to the array of current config object(s)</p>

<p><strong>Parameters:</strong> <code>VasConfig[]</code> - an array of one or more VasConfig objects.</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if cfg is <code>null</code> or if there are more than one of a single VasConfig type.</p>

<h3 id="clearconfigs" class="anchor"><a class="heading-anchor" href="#clearconfigs"><span></span></a>clearConfigs()</h3>

<pre class="prettify prettyprint"><code>public void clearConfigs()</code>
</pre>

<p>Removes all VasConfig objects from the SDK.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> None</p>

<h3 id="enablereadpassmode" class="anchor"><a class="heading-anchor" href="#enablereadpassmode"><span></span></a>enableReadPassMode()</h3>

<pre class="prettify prettyprint"><code>public void enableReadPassMode()</code>
</pre>

<p>Configure polling for reader mode only and only for Tech TypeA and Tech TypeB</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> None</p>

<h3 id="disablereadpassmode" class="anchor"><a class="heading-anchor" href="#disablereadpassmode"><span></span></a>disableReadPassMode()</h3>

<pre class="prettify prettyprint"><code>public void disableReadPassMode()
</code>
</pre>

<p>Return to default polling configuration</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> None</p>

<h3 id="onpassdetected" class="anchor"><a class="heading-anchor" href="#onpassdetected"><span></span></a>onPassDetected()</h3>

<pre class="prettify prettyprint"><code>public void onPassDetected(Pass pass)
</code>
</pre>

<p>This interface must be implemented in the calling application. The interface method onPassDetected() will be called when an AppleVAS NFC token is read. The ZebraNFCVAS SDK will provide the Pass that was read. The Pass object will have the decrypted payload (if possible) and meta data about the pass</p>

<p><strong>Parameters:</strong> Pass pass - a Pass object containing information about the pass that was read.</p>

<p><strong>Return values:</strong> None</p>

<h2 id="pass" class="anchor"><a class="heading-anchor" href="#pass"><span></span></a>Pass</h2>

<p>This an object that contains information and the payload of the pass read from the user’s mobile device.</p>

<h3 id="getpasstype" class="anchor"><a class="heading-anchor" href="#getpasstype"><span></span></a>getPassType()</h3>

<pre class="prettify prettyprint"><code>public Pass.Type getPassType()
</code>
</pre>

<p>Returns the type of the Pass</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> <code>Pass.Type.AppleVas</code></p>

<h3 id="getpayloaddate" class="anchor"><a class="heading-anchor" href="#getpayloaddate"><span></span></a>getPayloadDate()</h3>

<pre class="prettify prettyprint"><code>public Date getPayloadDate()
</code>
</pre>

<p>Returns the Date of the pass. This corresponds to the time when the pass NFC message was generated by an Apple device. The date should be examined and the pass should be rejected if the time is more than 10 sec older than the current time on the reading device. This is to prevent recording and replay attacks. The Date should be within 10 sec of the current date and time</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> <code>Date</code> date</p>

<h3 id="getpayloadmessage" class="anchor"><a class="heading-anchor" href="#getpayloadmessage"><span></span></a>getPayloadMessage()</h3>

<pre class="prettify prettyprint"><code>public byte[] getPayloadMessage()
</code>
</pre>

<p>Returns the content of the NFC message received from the Apple device. If the Private Key was provided and the decryption is successful, this will be the decrypted payload of the NFC message. Otherwise, this will be the encrypted payload.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> <code>byte[]</code> payload</p>

<h3 id="getpasstypeid" class="anchor"><a class="heading-anchor" href="#getpasstypeid"><span></span></a>getPassTypeId()</h3>

<pre class="prettify prettyprint"><code>public String getPassTypeId()
</code>
</pre>

<p>Returns the Pass Type Id that matches the pass that was read.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> <code>String</code> Pass Type Id</p>

<h3 id="getmerchantid" class="anchor"><a class="heading-anchor" href="#getmerchantid"><span></span></a>getMerchantId()</h3>

<pre class="prettify prettyprint"><code>public byte[] getMerchantId()
</code>
</pre>

<p>Returns the MerchantId that matches the pass that was read. This is the SHA256 of the Pass Type Id.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> <code>byte[]</code> MerchantId</p>

<h3 id="getresultcode" class="anchor"><a class="heading-anchor" href="#getresultcode"><span></span></a>getResultCode()</h3>

<pre class="prettify prettyprint"><code>public Pass.Result getResultCode()
</code>
</pre>

<p>Returns the result code for receiving the pass.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> </p>

<ul>
<li><code>Pass.Result.Success</code> - pass was successfully read and decrypted</li>

<li><code>Pass.Result.Failure</code> - there was a failure attempting to read the pass. The payload is not valid</li>

<li><code>Pass.Result.NotVas</code> - a tag was detected but it was not an Apple VAS pass and was not read</li>

<li><code>Pass.Result.IncorrectPrivateKey</code> - the private key provided does not correspond to the public key used to encrypt the pass. As a result, the pass could not be decrypted and the payload is encrypted</li>

<li><code>Pass.Result.VasNotActive</code> - the Apple device did not have an active Apple VAS pass. This could be for a number of reasons, including, but not limited to:


<ul>
<li>The user manually selected a pass that does not have an NFC enablement</li>

<li>The user’s device requires authentication (FaceID or pass code) before the NFC pass can be read • The user’s device is locked</li></ul>
</li>

<li><code>Pass.Result.DecryptionFailure</code> - the attempt to decrypt the pass failed</li>
</ul>

<hr>

<h2 id="samplecode" class="anchor"><a class="heading-anchor" href="#samplecode"><span></span></a>Sample Code</h2>

<pre class="prettyprint"><code>    onCreate() {
        // Create a config object
        AppleVasConfig cfg = new AppleVasConfig();

        //-- example of setting a filter and then clearing the filter
        cfg.setFilter(new byte[]{(byte) 0xaa, 0x55, (byte) 0xaa, 0x55}, AppleVasConfig.FilterType.ExactMatch);
        cfg.setFilterNone();

        //-- example of setting a URL and then clearing the URL
        cfg.setMerchantURL("https://www.zebra.com/vas-signup");
        cfg.setMerchantURL(null);

        //-- example of setting the private key and the Pass Type ID
        cfg.setPrivateKey(ZebraPrivateKeyStr);
        cfg.setPassTypeIds(new String[] {"pass.com.pronto.zebra-wallet-pass.demo"});

        //-- create the main object and specify the current Activity as the Activity and the Response
        //  also specifies the above VasConfig object as the config object to be used.
        vasSDK = new ZebraNfcVas(this, this, cfg);

        //-- examples of modifying the cfg object
        vasSDK.setVasConfig(cfg);       // there are now TWO identical cfgs set
        vasSDK.clearConfigs();          // clear out all configuration objects
        vasSDK.setVasConfig(cfg);       // set the SINGLE cfg we're interested in

        //-- activate the connection to the NfcAdapter
        vasSDK.connectToReader();

    }

    onResume() {
        /* configure the NFC adapter for reader mode only */
        vasSDK.enableReadPassMode();
    }

    onPause() {
        /* return the NFC adapter to standard polling */
        vasSDK.disableReadPassMode();
    }

    /* This method will be called when a pass is detected and read during polling */
    public void onPassDetected(Pass pass) {
        if(pass.getPassType() == Pass.Type.AppleVas){
            if(pass.getResultCode() == Pass.Result.Success) {
                // Decrypted Pass
                DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                format.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));
                String formatted = format.format(pass.getPayloadDate()) + "Z";
                Log.v(TAG, "--- PASS Received and Decrypted ---");
                Log.v(TAG, "Pass Date: " + formatted);
                Log.v(TAG, "Payload as HEX: " + ByteArrayToHexString(pass.getPayloadMessage()));
                Log.v(TAG, "Payload as ASCII: " + new String(pass.getPayloadMessage(), StandardCharsets.UTF_8));
                Log.v(TAG, "Payload is from pass with Pass Type Id: " + pass.getPassTypeId());
                Log.v(TAG, "This Pass Type Id corresponds to merchantId: " + ByteArrayToHexString(pass.getMerchantId()));
            }
            else if(pass.getResultCode() == Pass.Result.IncorrectPrivateKey){
                // Encrypted Pass
                Log.v(TAG, "--- PASS Received but Wrong Private Key or No Private Key provided for Decryption ---");
                Log.v(TAG, "Encrypted pass payload as HEX: " + ByteArrayToHexString(pass.getPayloadMessage()));
                Log.v(TAG, "Payload is from pass with Pass Type Id: " + pass.getPassTypeId());
                Log.v(TAG, "This Pass Type Id corresponds to merchantId: " + ByteArrayToHexString(pass.getMerchantId()));
            }
            else if(pass.getResultCode() == Pass.Result.DecryptionFailure) {
                // Encrypted Pass
                Log.v(TAG, "--- PASS Received but Decryption Failure ---");
                Log.v(TAG, "Encrypted pass payload as HEX: " + ByteArrayToHexString(pass.getPayloadMessage()));
                Log.v(TAG, "Payload is from pass with Pass Type Id: " + pass.getPassTypeId());
                Log.v(TAG, "This Pass Type Id corresponds to merchantId: " + ByteArrayToHexString(pass.getMerchantId()));
            }
            else if(pass.getResultCode() == Pass.Result.Failure) {
                // No Pass
                Log.v(TAG, "--- Pass Not Read for some reason - see the Status Word ---");
                Log.v(TAG, "Returned Status Word is: " + ByteArrayToHexString(pass.getPayloadMessage()));
            } 
        }
    }
</code></pre>

<hr>

<h2 id="bestpractices" class="anchor"><a class="heading-anchor" href="#bestpractices"><span></span></a>Best Practices</h2>

<ul>
<li><strong>Application life cycle -</strong> enableReadPassMode() should be called when the app is in the foreground and disableReadPassMode() should be called when the app moves away from the foreground</li>
</ul>

<hr>

<h2 id="seealso" class="anchor"><a class="heading-anchor" href="#seealso"><span></span></a>See Also</h2>

<ul>
<li><a href="../about">About NFC VAS</a></li>
</ul><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2023 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>